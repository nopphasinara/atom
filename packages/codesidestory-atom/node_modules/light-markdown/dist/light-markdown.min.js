/*! light-markdown 20-06-2018 */

(function(){"use strict";function a(a){return a&&(a=a.replace(/>/g,"&gt;"),a=a.replace(/</g,"&lt;")),a}function b(a){var b=a.map(function(a){return 1===a.token.length?a.token:""}).join();return{nonTokensChars:new RegExp("[^"+b+"]"),multilineQuote:/(^|\n)&gt;&gt;&gt;([\s\S]*$)/,singleLineQuote:/(^|\n)&gt;(([^\n]*)(\n&gt;[^\n]*)*)/g,blockquoteTags:/<\/?blockquote>/gi,doubleLineBreak:/\r?\n\r?\n\r?/g,singleLineBreak:/\r?\n\r?/g,url:/(\(?((https?:\/\/|ftp:\/\/).*?[a-z\u00a1-\uffff_\/0-9\-\#=._~:\/?+,;=@()[\]&])(?=(\.|,|;|\?|\!)?("|'|«|»|\&gt\;|<|>|\[|\s|\r|\n|$)))/gi}}function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(){var a=[{name:"pre",token:"```",elementName:"pre",multiline:!0,plainContent:!0},{name:"code",token:"`",elementName:"code",ignoreAfter:!0,plainContent:!0},{name:"bold",token:"*",elementName:"b",requireNonTokens:!0,spaceWrapIgnored:!0},{name:"italics",token:"_",elementName:"i",requireNonTokens:!0},{name:"strikethrough",token:"~",elementName:"s",requireNonTokens:!0,spaceWrapIgnored:!0}];return a.forEach(function(a){if(!a.regex){var b='(^|[\\s\\?\\.,\\-!\\^;:{(\\[%$#+="])',d=a.multiline?"([\\s\\S]*?)?":"(.*?\\S *)?",e=a.ignoreAfter?"":"(?=$|\\s|[\\?\\.,'\\-!\\^;:})\\]%$~{\\[<#+=\"])",f=c(a.token),g=b+f+d+f+e;a.regex=new RegExp(g,"g")}}),a}var e={},f=d(),g=b(f),h="₪₪PLaiN₪₪",i={},j={slack:{bold:!0,italics:!0,strikethrough:!0,pre:!0,code:!0,longQuote:!0,quote:!0,autoLink:!0,paragraph:!0,lineBreaks:!0},skype:{bold:!0,italics:!0,strikethrough:!0,pre:!1,code:!1,longQuote:!1,quote:!1,autoLink:!0,paragraph:!1,lineBreaks:!0}};e.setOption=function(a,b){return i[a]=!!b,this},e.getOption=function(a){return i[a]},e.setFlavor=function(a){var b=j[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(i[c]=b[c]);return this},e.toHtml=function(b){b=a(b);var c=[];if(f.forEach(function(a){i[a.name]&&(b=b.replace(a.regex,function(b,d,e){if(!e||a.requireNonTokens&&!g.nonTokensChars.test(e)||1===a.token.length&&(e[0]===a.token||e.slice(-1)===a.token)||a.spaceWrapIgnored&&" "===e[0]&&" "===e.slice(-1))return b;if("function"==typeof a.processContent&&(e=a.processContent(e)),a.plainContent){var f=c.push(e)-1;e=h+f}return d+"<"+a.elementName+">"+e+"</"+a.elementName+">"}))}),i.longQuote&&(b=b.replace(g.multilineQuote,function(a,b,c){return"&gt;&gt;&gt;"===a?a:"<blockquote>"+(c=c.replace(/^([\s]*)(&gt;)*/,function(a,b,c){return c?a:""}))+"</blockquote>"})),i.quote&&(b=b.replace(g.singleLineQuote,function(a,b,c){return"&gt;"===a?a:"<blockquote>"+(c=c.replace(/\n&gt;/g,"\n"))+"</blockquote>"})),i.autoLink&&(b=b.replace(g.url,function(a,b){var c="",d="";if("("===b.substring(0,1)){var e=b.slice(-1);c="(",b=b.slice(1,")"===e?-1:b.length),d=")"===e?")":""}return c+'<a href="'+b+'" target="_blank">'+b+"</a>"+d})),i.paragraph){for(var d,e=[];d=g.doubleLineBreak.exec(b);)e.push({start:d.index,length:d[0].length});for(;d=g.blockquoteTags.exec(b);)e.push({start:d.index,length:d[0].length,suffix:d[0]});e.push({start:b.length,length:0}),e.sort(function(a,b){return a.start-b.start});var j="",k=0;e.forEach(function(a){var c="",d=b.substring(k,a.start);d&&(c="<p>"+d+"</p>"),a.suffix&&(c+=a.suffix),j+=c,k=a.start+a.length}),b=j}return i.lineBreaks&&(b=b.replace(g.singleLineBreak,"<br/>")),c.forEach(function(a,c){b=b.replace(h+c,a)}),b},e.setFlavor("slack");var k=this;"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):k.lightMarkdown=e}).call(this);
//# sourceMappingURL=light-markdown.min.js.map
